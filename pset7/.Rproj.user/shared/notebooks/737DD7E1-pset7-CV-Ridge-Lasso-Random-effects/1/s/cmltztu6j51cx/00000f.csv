"0","d <- d %>% filter(!is.na(score))"
"0",""
"0","#initialize columns"
"0","d[,c('lm', 'lmer')] = NA"
"0",""
"0","# loop through the folds"
"0","for (j in 1:k){"
"0","  cat(j,'') ## print out the progress"
"0","  "
"0","  ## train rows are the ones not in the j-th fold"
"0","  train.rows = d$fold != j"
"0","  "
"0","  # test rows are the observations in the j-th fold"
"0","  test.rows  = d$fold == j"
"0","  "
"0","  ## fit model on training data"
"0","  ## linear regression model"
"0","  lm1 <- lm(score ~ ha + team + opp, data = d[train.rows,])"
"0","  "
"0","  ## mixed effects linear regression model"
"0","  lmer1 <- lmer(score ~ ha + (1|team) + (1|opp), data = d[train.rows,])"
"0","  "
"0","  ## make predictions"
"0","  d$lm[test.rows] = predict(lm1, newdata=d[test.rows,], type='response')"
"0","  d$lmer[test.rows] = predict(lmer1, newdata=d[test.rows,], type='response')"
"0","}"
"1","1"
"1"," "
"1",""
"1","2"
"1"," "
"1",""
"1","3"
"1"," "
"1",""
"1","4"
"1"," "
"1",""
"1","5"
"1"," "
"1",""
